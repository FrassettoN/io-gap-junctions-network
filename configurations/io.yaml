name: DBBS IO volume
packages:
  - bsb-nest~=6.0
components:
  - nest_models/build_models.py
storage:
  engine: hdf5
  root: networks/io_volume.hdf5
network:
  x: 50
  y: 50
  z: 50
regions:
  inferior_olivary:
    type: group
    children:
      - io_layer
partitions:
  io_layer:
    thickness: 50
cell_types:
  io:
    spatial:
      radius: 7.5
      density: 3.9e-5
    plotting:
      display_name: Inferior olivary cells
placement:
  io_layer_placement:
    strategy: bsb.placement.RandomPlacement
    partitions:
      - io_layer
    cell_types:
      - io
connectivity:
  gap_io:
    strategy: bsb.connectivity.AllToAll
    presynaptic:
      cell_types:
        - io
    postsynaptic:
      cell_types:
        - io

simulations:
  basal_activity:
    simulator: nest
    resolution: 0.1
    duration: 5000
    modules:
      - iomodule
    cell_models:
      io:
        model: eglif_cond_alpha_multisyn_mod
        constants:
          E_L: -55
          t_ref: 50.0
          V_m: -55
          V_reset: -55
          C_m: 292.5655822753906
          tau_m: 10.405184745788574
          I_e: 11.013994216918945
          k_adap: 2.9717917442321777
          k_1: 0.5179843306541443
          k_2: 0.09520511329174042
          V_th: -46.31399154663086
          A1: 1239.3447265625
          A2: 2395.549072265625
          
          # Postsynaptic receptor
          tau_syn1: 1
          tau_syn2: 60
          E_rev1: 0
          E_rev2: -80

    connection_models:
      gap_io:
        synapses:
          - model: gap_junction
            weight: 1  # careful with the indentation here, same as `model`
        rule: one_to_one
        make_symmetric: True
        
    devices:
      background_noise:
        device: poisson_generator
        rate: 15
        weight: 100
        receptor_type: 1
        start: 500.0
        stop: 1000.0
        delay: 0.1
        targetting:
          strategy: by_id
          ids:
            io:
              - 1

      io_record:
        device: spike_recorder
        delay: 0.1
        targetting:
          strategy: cell_model
          cell_models:
            - io
            
      io_Vm_record:
        device: multimeter
        delay: 0.1
        properties:
          - V_m
        units:
          - mV
        targetting:
          strategy: cell_model
          cell_models:
            - io